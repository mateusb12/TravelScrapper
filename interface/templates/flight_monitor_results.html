<!DOCTYPE html>
<html lang="EN">
<head>
    <title>Price Comparison</title>
    <link rel="icon" type="image/png" href="../static/icons/flight_icon.png">
    <style>
        .label-value-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
        }

        label {
            font-weight: bold;
            font-size: 120%;
            color: rgb(255, 255, 255);
            margin-bottom: 8px;
        }

        /* Center the window */
        .center-window {
            display: flex;
            justify-content: center;
            align-items: center;
            height: auto;
            flex-direction: column;
        }

        /* Rounded window */
        .rounded-window {
            background-color: #82a83f;
            border-radius: 25px;
            padding: 20px;
            width: auto;
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            margin-bottom: 40px;
        }

        /* Labels */
        label {
            font-weight: bold;
            font-size: 120%;
            color: rgb(255, 255, 255);
            display: flex;
            align-items: center; /* Centering items vertically */
            margin-bottom: 8px; /* Added bottom margin */
        }

        /* Values */
        .value {
            margin-top: 10px;
            margin-left: 0px; /* Adjusted margin-left to give some spacing between label and value */
            font-size: 200%; /* Increased Font Size */
            font-weight: bold; /* Bold Font Weight */
            color: #ffffff;
            background-color: #444444; /* Background Color */
            border: 2px solid #ffffff; /* Border */
            padding: 5px 10px; /* Padding */
            border-radius: 5px; /* Rounded Corners */
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5); /* Box Shadow */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Text Shadow */
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #price_diff {
            font-weight: bold;
        }
    </style>
</head>
<body>
<div class="center-window">
    <div class="rounded-window">
        <div class="label-value-container">
            <label id="firebase_price_label">Smallest Firebase Price:</label>
            <span class="value" id="firebase_price">{{ output.cheapest_firebase_flight }}</span>
        </div>
        <br>
        <div class="label-value-container">
            <label id="kiwi_price_label">Smallest Kiwi Price:</label>
            <span class="value" id="kiwi_price">{{ output.cheapest_kiwi_flight }}</span>
        </div>
    </div>

    <div class="rounded-window">
        <div class="label-value-container">
            <label id="result_price_label">New price found is</label>
            <span class="value" id="price_diff">0</span>
        </div>
    </div>
</div>
</body>

<script>
    function getPriceDifference() {
        let firebasePriceElement = document.getElementById('firebase_price');
        let kiwiPriceElement = document.getElementById('kiwi_price');
        const firebasePrice = firebasePriceElement.innerText;
        const kiwiPrice = kiwiPriceElement.innerText;

        const difference = kiwiPrice - firebasePrice;
        return Math.round((difference / firebasePrice) * 100).toString();
    }

    function adjustPriceTag(value) {
        if (value > 0) {
            return "+" + value + "%";
        } else {
            return "-" + Math.abs(value) + "%";
        }
    }

    function setPriceColor(value) {
        let priceDiffElement = document.getElementById('price_diff');
        if (value > 0) {
            priceDiffElement.style.color = "rgba(255,0,0,0.67)";
        } else {
            priceDiffElement.style.color = "rgba(0,255,0,0.7)";
        }
    }

    function setPriceDifference() {
        let priceDiffElement = document.getElementById('price_diff');
        let priceDiff = getPriceDifference();
        setPriceColor(priceDiff);
        priceDiffElement.innerText = adjustPriceTag(priceDiff);
    }

    window.onload = function () {
        setPriceDifference();
    };
</script>
</html>
